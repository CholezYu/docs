## 什么是跨域

- 浏览器最安全的核心功能就是同源策略 (请求时客户端和服务器双方的协议、域名、端口号保持一致)

- 浏览器在请求的时候，违背了同源策略就是跨域请求

## 解决跨域-JSONP

- 虽然同源策略限制了 ajax 的跨域请求，但是并没有限制 HTML 的跨域资源请求 (img, link, script)

- 我们可以通过 script 标签的 src 属性进行跨域请求，并且携带一个回调函数名作为查询参数

- 服务器返回一个回调函数调用的字符串，并且把数据也封装在了函数调用字符串的内部作为实参

- 因为是 script 标签发送的请求，所以 script 标签接收到响应以后，就会执行这段代码，则预先封装的回调函数就会被调用，并且回调函数的形参就是后端传递过来的数据

## 解决跨域-CORS

- CORS (跨域资源共享) 主要是由服务器和客户端(浏览器会主动参与，不需要开发人员参与)共同负责的

- 当浏览器发送 ajax 请求时，如果发现是跨域请求，会自动在请求头中携带 Origin 字段(当前请求地址)

- 服务端接收到请求后，拿到请求头中 Origin 的值，判断当前的地址在不在白名单中

  - 如果在白名单中，就可以响应请求，并且携带 `Access-Control-Allow-Origin` 字段作为响应头，值是当前的 Origin

  - 如果不在白名单，响应头就不会携带 `Access-Control-Allow-Origin` 字段

- 客户端会根据响应头中的 `Access-Control-Allow-Origin` 字段是否存在，考虑是否放行

## 解决跨域-服务器代理

### 正向代理(开发环境)

- devServer 一旦开启 proxy 代理，就是使用 `node-http-proxy` 让 devServer 拥有的代理功能

- 我们可以对 devServer 进行代理配置，代理我们客户端向服务器发请求，属于正向代理

### 反向代理(生产环境)

- 一般在项目部署的服务器上搭建 nginx 代理服务器解决跨域问题

- nginx 服务器代理的是前端项目部署的服务器向后台接口服务器发请求，所以属于反向代理
